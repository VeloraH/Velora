<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Velora Holdings - Login</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600&display=swap" rel="stylesheet" />
  
  <style>
    /* Reset & base */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body, html {
      height: 100%;
      font-family: 'Plus Jakarta Sans', sans-serif;
      background: #121212;
      color: #eee;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      user-select: none;
    }
    /* Background particle canvas */
    #bgcanvas {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: -1;
      background: linear-gradient(135deg, #1a1a1a, #242424);
    }
    /* Container */
    .login-wrapper {
      background: rgba(24,24,24,0.9);
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(74, 144, 226, 0.7);
      width: 400px;
      padding: 3rem 2.5rem 3rem 2.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }
    .login-wrapper h1 {
      font-weight: 600;
      font-size: 2.5rem;
      color: #4a90e2;
      margin-bottom: 2rem;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }
    
    /* Floating labels */
    .input-group {
      position: relative;
      width: 100%;
      margin-bottom: 1.8rem;
    }
    input {
      width: 100%;
      background: #1e1e1e;
      border: none;
      border-radius: 12px;
      padding: 1.2rem 1rem 1.2rem 1rem;
      font-size: 1.1rem;
      color: #eee;
      outline: none;
      transition: background-color 0.3s ease;
    }
    input:focus {
      background-color: #272727;
      box-shadow: 0 0 8px #4a90e2;
    }
    label {
      position: absolute;
      left: 1rem;
      top: 1.3rem;
      color: #666;
      font-size: 1rem;
      font-weight: 500;
      pointer-events: none;
      transition: all 0.25s ease;
      user-select: none;
    }
    input:focus + label,
    input:not(:placeholder-shown) + label {
      top: -0.6rem;
      left: 1rem;
      font-size: 0.75rem;
      color: #4a90e2;
      background: #121212;
      padding: 0 0.3rem;
      border-radius: 3px;
    }

    /* Error message */
    #errorMsg {
      color: #ff4c4c;
      font-weight: 600;
      margin-bottom: 1rem;
      min-height: 1.2rem;
      text-align: center;
      user-select: none;
    }

    /* Button */
    button {
      width: 100%;
      padding: 1.3rem;
      font-size: 1.15rem;
      font-weight: 600;
      border-radius: 12px;
      border: none;
      background-color: #4a90e2;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.6rem;
      user-select: none;
    }
    button:disabled {
      background-color: #2f5fa0;
      cursor: default;
      box-shadow: none;
    }
    button:hover:not(:disabled) {
      background-color: #357abd;
      box-shadow: 0 0 12px #357abd;
    }
    button:active:not(:disabled) {
      background-color: #2a5f9e;
    }

    /* Spinner */
    .spinner {
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      display: none;
    }
    .spinner.active {
      display: inline-block;
    }
    @keyframes spin {
      to {transform: rotate(360deg);}
    }

    /* Footer */
    .footer-text {
      margin-top: 2rem;
      font-size: 0.85rem;
      color: #555;
      user-select: none;
      text-align: center;
      width: 100%;
    }

    /* Responsive */
    @media (max-width: 450px) {
      .login-wrapper {
        width: 90vw;
        padding: 2rem 1.5rem;
      }
    }
  </style>
</head>
<body>

<canvas id="bgcanvas"></canvas>

<div class="login-wrapper" role="main" aria-label="Login Form">
  <h1>Velora Holdings</h1>
  <form id="loginForm" autocomplete="off" novalidate>
    <div class="input-group">
      <input id="username" name="username" type="text" placeholder=" " autocomplete="off" required minlength="3" />
      <label for="username">Username</label>
    </div>
    <div class="input-group">
      <input id="password" name="password" type="password" placeholder=" " autocomplete="off" required minlength="6" />
      <label for="password">Password</label>
    </div>
    <div id="errorMsg" aria-live="polite"></div>
    <button type="submit" aria-label="Log in to Velora Holdings">
      Log In
      <span class="spinner" id="spinner"></span>
    </button>
  </form>
</div>

<div class="footer-text" aria-hidden="true">Â© 2025 Velora Holdings</div>

<audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/26/audio_d51848d7f3.mp3?filename=click-590.wav" preload="auto"></audio>

<script>
  // Particle background animation
  const canvas = document.getElementById('bgcanvas');
  const ctx = canvas.getContext('2d');
  let particlesArray = [];
  const colors = ['#4a90e2', '#357abd', '#2a5f9e', '#1f1f1f'];
  let width, height;

  function resize() {
    width = window.innerWidth;
    height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;
  }
  window.addEventListener('resize', resize);
  resize();

  class Particle {
    constructor() {
      this.x = Math.random() * width;
      this.y = Math.random() * height;
      this.size = Math.random() * 3 + 1;
      this.speedX = (Math.random() - 0.5) * 0.3;
      this.speedY = (Math.random() - 0.5) * 0.3;
      this.color = colors[Math.floor(Math.random() * colors.length)];
      this.opacity = Math.random() * 0.5 + 0.2;
    }
    update() {
      this.x += this.speedX;
      this.y += this.speedY;
      if (this.x < 0 || this.x > width) this.speedX *= -1;
      if (this.y < 0 || this.y > height) this.speedY *= -1;
    }
    draw() {
      ctx.beginPath();
      ctx.fillStyle = `rgba(${hexToRgb(this.color)},${this.opacity})`;
      ctx.shadowColor = this.color;
      ctx.shadowBlur = 10;
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    }
  }
  function hexToRgb(hex) {
    // Convert hex color to rgb string
    const bigint = parseInt(hex.replace('#',''), 16);
    const r = (bigint >> 16) & 255;
    const g = (bigint >> 8) & 255;
    const b = bigint & 255;
    return `${r},${g},${b}`;
  }

  function initParticles(num = 120) {
    particlesArray = [];
    for(let i=0; i<num; i++) {
      particlesArray.push(new Particle());
    }
  }

  function animate() {
    ctx.clearRect(0, 0, width, height);
    particlesArray.forEach(p => {
      p.update();
      p.draw();
    });
    requestAnimationFrame(animate);
  }

  initParticles();
  animate();

  // Login logic
  const loginForm = document.getElementById('loginForm');
  const errorMsg = document.getElementById('errorMsg');
  const spinner = document.getElementById('spinner');
  const clickSound = document.getElementById('clickSound');

  // Default users: admin/admin123 and normal user/userpass
  const defaultUsers = [
    { username: 'admin', password: 'admin123', role: 'admin' },
    { username: 'user', password: 'userpass', role: 'user' }
  ];

  function getUsers() {
    const storedUsers = localStorage.getItem('veloraUsers');
    return storedUsers ? JSON.parse(storedUsers) : defaultUsers;
  }

  function saveUsers(users) {
    localStorage.setItem('veloraUsers', JSON.stringify(users));
  }

  // Initialize localStorage with default users if empty
  if (!localStorage.getItem('veloraUsers')) {
    saveUsers(defaultUsers);
  }

  loginForm.addEventListener('submit', async e => {
    e.preventDefault();
    errorMsg.textContent = '';
    spinner.classList.add('active');
    loginForm.querySelector('button').disabled = true;
    clickSound.play();

    // simulate server delay
    await new Promise(r => setTimeout(r, 1000));

    const username = loginForm.username.value.trim();
    const password = loginForm.password.value.trim();

    const users = getUsers();

    const user = users.find(u => u.username === username && u.password === password);

    if (user) {
      localStorage.setItem('veloraUser', JSON.stringify(user));
      spinner.classList.remove('active');
      loginForm.querySelector('button').disabled = false;
      // Redirect to home/dashboard after login
      window.location.href = '/Velora/Dashboard/';
    } else {
      spinner.classList.remove('active');
      loginForm.querySelector('button').disabled = false;
      errorMsg.textContent = 'Invalid username or password.';
    }
  });
</script>

</body>
</html>
